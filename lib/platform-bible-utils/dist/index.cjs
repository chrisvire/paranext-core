"use strict";var V=Object.defineProperty;var F=(r,e,t)=>e in r?V(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var m=(r,e,t)=>(F(r,typeof e!="symbol"?e+"":e,t),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class L{constructor(e,t=1e4){m(this,"variableName");m(this,"promiseToValue");m(this,"resolver");m(this,"rejecter");this.variableName=e,this.promiseToValue=new Promise((s,a)=>{this.resolver=s,this.rejecter=a}),t>0&&setTimeout(()=>{this.rejecter&&(this.rejecter(`Timeout reached when waiting for ${this.variableName} to settle`),this.complete())},t),Object.seal(this)}get promise(){return this.promiseToValue}get hasSettled(){return Object.isFrozen(this)}resolveToValue(e,t=!1){if(this.resolver)console.debug(`${this.variableName} is being resolved now`),this.resolver(e),this.complete();else{if(t)throw Error(`${this.variableName} was already settled`);console.debug(`Ignoring subsequent resolution of ${this.variableName}`)}}rejectWithReason(e,t=!1){if(this.rejecter)console.debug(`${this.variableName} is being rejected now`),this.rejecter(e),this.complete();else{if(t)throw Error(`${this.variableName} was already settled`);console.debug(`Ignoring subsequent rejection of ${this.variableName}`)}}complete(){this.resolver=void 0,this.rejecter=void 0,Object.freeze(this)}}function K(){return"00-0-4-1-000".replace(/[^-]/g,r=>((Math.random()+~~r)*65536>>r).toString(16).padStart(4,"0"))}function R(r){return typeof r=="string"||r instanceof String}function d(r){return JSON.parse(JSON.stringify(r))}function k(r,e=300){if(R(r))throw new Error("Tried to debounce a string! Could be XSS");let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>r(...s),e)}}function W(r,e,t){const s=new Map;return r.forEach(a=>{const n=e(a),i=s.get(n),u=t?t(a,n):a;i?i.push(u):s.set(n,[u])}),s}function Z(r){return typeof r=="object"&&r!==null&&"message"in r&&typeof r.message=="string"}function X(r){if(Z(r))return r;try{return new Error(JSON.stringify(r))}catch{return new Error(String(r))}}function Q(r){return X(r).message}function M(r){return new Promise(e=>setTimeout(e,r))}function Y(r,e){const t=M(e).then(()=>{});return Promise.any([t,r()])}function ee(r,e="obj"){const t=new Set;Object.getOwnPropertyNames(r).forEach(a=>{try{typeof r[a]=="function"&&t.add(a)}catch(n){console.debug(`Skipping ${a} on ${e} due to error: ${n}`)}});let s=Object.getPrototypeOf(r);for(;s&&Object.getPrototypeOf(s);)Object.getOwnPropertyNames(s).forEach(a=>{try{typeof r[a]=="function"&&t.add(a)}catch(n){console.debug(`Skipping ${a} on ${e}'s prototype due to error: ${n}`)}}),s=Object.getPrototypeOf(s);return t}function re(r,e={}){return new Proxy(e,{get(t,s){return s in t?t[s]:async(...a)=>(await r())[s](...a)}})}class te{constructor(e,t){m(this,"baseDocument");m(this,"contributions",new Map);m(this,"latestOutput");m(this,"options");this.baseDocument=e,this.options=t,this.updateBaseDocument(e)}updateBaseDocument(e){return this.validateStartingDocument(e),this.baseDocument=this.options.copyDocuments?d(e):e,this.rebuild()}addOrUpdateContribution(e,t){this.validateContribution(e,t);const s=this.contributions.get(e),a=this.options.copyDocuments&&t?d(t):t;this.contributions.set(e,a);try{return this.rebuild()}catch(n){throw s?this.contributions.set(e,s):this.contributions.delete(e),new Error(`Error when setting the document named ${e}: ${n}`)}}deleteContribution(e){const t=this.contributions.get(e);if(!t)throw new Error("{documentKey} does not exist");this.contributions.delete(e);try{return this.rebuild()}catch(s){throw this.contributions.set(e,t),new Error(`Error when deleting the document named ${e}: ${s}`)}}rebuild(){if(this.contributions.size===0){let t=d(this.baseDocument);return t=this.transformFinalOutput(t),this.validateOutput(t),this.latestOutput=t,this.latestOutput}let e=this.baseDocument;return this.contributions.forEach(t=>{e=$(e,t,this.options.ignoreDuplicateProperties),this.validateOutput(e)}),e=this.transformFinalOutput(e),this.validateOutput(e),this.latestOutput=e,this.latestOutput}}function se(...r){let e=!0;return r.forEach(t=>{(!t||typeof t!="object"||Array.isArray(t))&&(e=!1)}),e}function ae(...r){let e=!0;return r.forEach(t=>{(!t||typeof t!="object"||!Array.isArray(t))&&(e=!1)}),e}function $(r,e,t){const s=d(r);return e&&Object.keys(e).forEach(a=>{if(Object.hasOwn(r,a)){if(se(r[a],e[a]))s[a]=$(r[a],e[a],t);else if(ae(r[a],e[a]))s[a]=s[a].concat(e[a]);else if(!t)throw new Error(`Cannot merge objects: key "${a}" already exists in the target object`)}else s[a]=e[a]}),s}class ne{constructor(e="Anonymous"){m(this,"unsubscribers",new Set);this.name=e}add(...e){e.forEach(t=>{"dispose"in t?this.unsubscribers.add(t.dispose):this.unsubscribers.add(t)})}async runAllUnsubscribers(){const e=[...this.unsubscribers].map(s=>s()),t=await Promise.all(e);return this.unsubscribers.clear(),t.every((s,a)=>(s||console.error(`UnsubscriberAsyncList ${this.name}: Unsubscriber at index ${a} failed!`),s))}}class ie{constructor(){m(this,"subscribe",this.event);m(this,"subscriptions");m(this,"lazyEvent");m(this,"isDisposed",!1);m(this,"dispose",()=>this.disposeFn());m(this,"emit",e=>{this.emitFn(e)})}get event(){return this.assertNotDisposed(),this.lazyEvent||(this.lazyEvent=e=>{if(!e||typeof e!="function")throw new Error("Event handler callback must be a function!");return this.subscriptions||(this.subscriptions=[]),this.subscriptions.push(e),()=>{if(!this.subscriptions)return!1;const t=this.subscriptions.indexOf(e);return t<0?!1:(this.subscriptions.splice(t,1),!0)}}),this.lazyEvent}emitFn(e){var t;this.assertNotDisposed(),(t=this.subscriptions)==null||t.forEach(s=>s(e))}assertNotDisposed(){if(this.isDisposed)throw new Error("Emitter is disposed")}disposeFn(){return this.assertNotDisposed(),this.isDisposed=!0,this.subscriptions=void 0,this.lazyEvent=void 0,Promise.resolve(!0)}}const D=[{shortName:"ERR",fullNames:["ERROR"],chapters:-1},{shortName:"GEN",fullNames:["Genesis"],chapters:50},{shortName:"EXO",fullNames:["Exodus"],chapters:40},{shortName:"LEV",fullNames:["Leviticus"],chapters:27},{shortName:"NUM",fullNames:["Numbers"],chapters:36},{shortName:"DEU",fullNames:["Deuteronomy"],chapters:34},{shortName:"JOS",fullNames:["Joshua"],chapters:24},{shortName:"JDG",fullNames:["Judges"],chapters:21},{shortName:"RUT",fullNames:["Ruth"],chapters:4},{shortName:"1SA",fullNames:["1 Samuel"],chapters:31},{shortName:"2SA",fullNames:["2 Samuel"],chapters:24},{shortName:"1KI",fullNames:["1 Kings"],chapters:22},{shortName:"2KI",fullNames:["2 Kings"],chapters:25},{shortName:"1CH",fullNames:["1 Chronicles"],chapters:29},{shortName:"2CH",fullNames:["2 Chronicles"],chapters:36},{shortName:"EZR",fullNames:["Ezra"],chapters:10},{shortName:"NEH",fullNames:["Nehemiah"],chapters:13},{shortName:"EST",fullNames:["Esther"],chapters:10},{shortName:"JOB",fullNames:["Job"],chapters:42},{shortName:"PSA",fullNames:["Psalm","Psalms"],chapters:150},{shortName:"PRO",fullNames:["Proverbs"],chapters:31},{shortName:"ECC",fullNames:["Ecclesiastes"],chapters:12},{shortName:"SNG",fullNames:["Song of Solomon","Song of Songs"],chapters:8},{shortName:"ISA",fullNames:["Isaiah"],chapters:66},{shortName:"JER",fullNames:["Jeremiah"],chapters:52},{shortName:"LAM",fullNames:["Lamentations"],chapters:5},{shortName:"EZK",fullNames:["Ezekiel"],chapters:48},{shortName:"DAN",fullNames:["Daniel"],chapters:12},{shortName:"HOS",fullNames:["Hosea"],chapters:14},{shortName:"JOL",fullNames:["Joel"],chapters:3},{shortName:"AMO",fullNames:["Amos"],chapters:9},{shortName:"OBA",fullNames:["Obadiah"],chapters:1},{shortName:"JON",fullNames:["Jonah"],chapters:4},{shortName:"MIC",fullNames:["Micah"],chapters:7},{shortName:"NAM",fullNames:["Nahum"],chapters:3},{shortName:"HAB",fullNames:["Habakkuk"],chapters:3},{shortName:"ZEP",fullNames:["Zephaniah"],chapters:3},{shortName:"HAG",fullNames:["Haggai"],chapters:2},{shortName:"ZEC",fullNames:["Zechariah"],chapters:14},{shortName:"MAL",fullNames:["Malachi"],chapters:4},{shortName:"MAT",fullNames:["Matthew"],chapters:28},{shortName:"MRK",fullNames:["Mark"],chapters:16},{shortName:"LUK",fullNames:["Luke"],chapters:24},{shortName:"JHN",fullNames:["John"],chapters:21},{shortName:"ACT",fullNames:["Acts"],chapters:28},{shortName:"ROM",fullNames:["Romans"],chapters:16},{shortName:"1CO",fullNames:["1 Corinthians"],chapters:16},{shortName:"2CO",fullNames:["2 Corinthians"],chapters:13},{shortName:"GAL",fullNames:["Galatians"],chapters:6},{shortName:"EPH",fullNames:["Ephesians"],chapters:6},{shortName:"PHP",fullNames:["Philippians"],chapters:4},{shortName:"COL",fullNames:["Colossians"],chapters:4},{shortName:"1TH",fullNames:["1 Thessalonians"],chapters:5},{shortName:"2TH",fullNames:["2 Thessalonians"],chapters:3},{shortName:"1TI",fullNames:["1 Timothy"],chapters:6},{shortName:"2TI",fullNames:["2 Timothy"],chapters:4},{shortName:"TIT",fullNames:["Titus"],chapters:3},{shortName:"PHM",fullNames:["Philemon"],chapters:1},{shortName:"HEB",fullNames:["Hebrews"],chapters:13},{shortName:"JAS",fullNames:["James"],chapters:5},{shortName:"1PE",fullNames:["1 Peter"],chapters:5},{shortName:"2PE",fullNames:["2 Peter"],chapters:3},{shortName:"1JN",fullNames:["1 John"],chapters:5},{shortName:"2JN",fullNames:["2 John"],chapters:1},{shortName:"3JN",fullNames:["3 John"],chapters:1},{shortName:"JUD",fullNames:["Jude"],chapters:1},{shortName:"REV",fullNames:["Revelation"],chapters:22}],J=1,B=D.length-1,_=1,x=1,U=r=>{var e;return((e=D[r])==null?void 0:e.chapters)??-1},oe=(r,e)=>({bookNum:Math.max(J,Math.min(r.bookNum+e,B)),chapterNum:1,verseNum:1}),ue=(r,e)=>({...r,chapterNum:Math.min(Math.max(_,r.chapterNum+e),U(r.bookNum)),verseNum:1}),le=(r,e)=>({...r,verseNum:Math.max(x,r.verseNum+e)}),ce=r=>(...e)=>r.map(s=>s(...e)).every(s=>s),he=r=>async(...e)=>{const t=r.map(async s=>s(...e));return(await Promise.all(t)).every(s=>s)};var fe=Object.getOwnPropertyNames,me=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty;function S(r,e){return function(s,a,n){return r(s,a,n)&&e(s,a,n)}}function b(r){return function(t,s,a){if(!t||!s||typeof t!="object"||typeof s!="object")return r(t,s,a);var n=a.cache,i=n.get(t),u=n.get(s);if(i&&u)return i===s&&u===t;n.set(t,s),n.set(s,t);var c=r(t,s,a);return n.delete(t),n.delete(s),c}}function A(r){return fe(r).concat(me(r))}var I=Object.hasOwn||function(r,e){return pe.call(r,e)};function v(r,e){return r||e?r===e:r===e||r!==r&&e!==e}var z="_owner",w=Object.getOwnPropertyDescriptor,q=Object.keys;function Ne(r,e,t){var s=r.length;if(e.length!==s)return!1;for(;s-- >0;)if(!t.equals(r[s],e[s],s,s,r,e,t))return!1;return!0}function Ee(r,e){return v(r.getTime(),e.getTime())}function j(r,e,t){if(r.size!==e.size)return!1;for(var s={},a=r.entries(),n=0,i,u;(i=a.next())&&!i.done;){for(var c=e.entries(),f=!1,o=0;(u=c.next())&&!u.done;){var l=i.value,h=l[0],N=l[1],p=u.value,O=p[0],H=p[1];!f&&!s[o]&&(f=t.equals(h,O,n,o,r,e,t)&&t.equals(N,H,h,O,r,e,t))&&(s[o]=!0),o++}if(!f)return!1;n++}return!0}function ve(r,e,t){var s=q(r),a=s.length;if(q(e).length!==a)return!1;for(var n;a-- >0;)if(n=s[a],n===z&&(r.$$typeof||e.$$typeof)&&r.$$typeof!==e.$$typeof||!I(e,n)||!t.equals(r[n],e[n],n,n,r,e,t))return!1;return!0}function g(r,e,t){var s=A(r),a=s.length;if(A(e).length!==a)return!1;for(var n,i,u;a-- >0;)if(n=s[a],n===z&&(r.$$typeof||e.$$typeof)&&r.$$typeof!==e.$$typeof||!I(e,n)||!t.equals(r[n],e[n],n,n,r,e,t)||(i=w(r,n),u=w(e,n),(i||u)&&(!i||!u||i.configurable!==u.configurable||i.enumerable!==u.enumerable||i.writable!==u.writable)))return!1;return!0}function ge(r,e){return v(r.valueOf(),e.valueOf())}function de(r,e){return r.source===e.source&&r.flags===e.flags}function T(r,e,t){if(r.size!==e.size)return!1;for(var s={},a=r.values(),n,i;(n=a.next())&&!n.done;){for(var u=e.values(),c=!1,f=0;(i=u.next())&&!i.done;)!c&&!s[f]&&(c=t.equals(n.value,i.value,n.value,i.value,r,e,t))&&(s[f]=!0),f++;if(!c)return!1}return!0}function be(r,e){var t=r.length;if(e.length!==t)return!1;for(;t-- >0;)if(r[t]!==e[t])return!1;return!0}var ye="[object Arguments]",Oe="[object Boolean]",Se="[object Date]",Ae="[object Map]",we="[object Number]",qe="[object Object]",je="[object RegExp]",Te="[object Set]",Ce="[object String]",Pe=Array.isArray,C=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,P=Object.assign,Re=Object.prototype.toString.call.bind(Object.prototype.toString);function Me(r){var e=r.areArraysEqual,t=r.areDatesEqual,s=r.areMapsEqual,a=r.areObjectsEqual,n=r.arePrimitiveWrappersEqual,i=r.areRegExpsEqual,u=r.areSetsEqual,c=r.areTypedArraysEqual;return function(o,l,h){if(o===l)return!0;if(o==null||l==null||typeof o!="object"||typeof l!="object")return o!==o&&l!==l;var N=o.constructor;if(N!==l.constructor)return!1;if(N===Object)return a(o,l,h);if(Pe(o))return e(o,l,h);if(C!=null&&C(o))return c(o,l,h);if(N===Date)return t(o,l,h);if(N===RegExp)return i(o,l,h);if(N===Map)return s(o,l,h);if(N===Set)return u(o,l,h);var p=Re(o);return p===Se?t(o,l,h):p===je?i(o,l,h):p===Ae?s(o,l,h):p===Te?u(o,l,h):p===qe?typeof o.then!="function"&&typeof l.then!="function"&&a(o,l,h):p===ye?a(o,l,h):p===Oe||p===we||p===Ce?n(o,l,h):!1}}function $e(r){var e=r.circular,t=r.createCustomConfig,s=r.strict,a={areArraysEqual:s?g:Ne,areDatesEqual:Ee,areMapsEqual:s?S(j,g):j,areObjectsEqual:s?g:ve,arePrimitiveWrappersEqual:ge,areRegExpsEqual:de,areSetsEqual:s?S(T,g):T,areTypedArraysEqual:s?g:be};if(t&&(a=P({},a,t(a))),e){var n=b(a.areArraysEqual),i=b(a.areMapsEqual),u=b(a.areObjectsEqual),c=b(a.areSetsEqual);a=P({},a,{areArraysEqual:n,areMapsEqual:i,areObjectsEqual:u,areSetsEqual:c})}return a}function De(r){return function(e,t,s,a,n,i,u){return r(e,t,u)}}function Je(r){var e=r.circular,t=r.comparator,s=r.createState,a=r.equals,n=r.strict;if(s)return function(c,f){var o=s(),l=o.cache,h=l===void 0?e?new WeakMap:void 0:l,N=o.meta;return t(c,f,{cache:h,equals:a,meta:N,strict:n})};if(e)return function(c,f){return t(c,f,{cache:new WeakMap,equals:a,meta:void 0,strict:n})};var i={cache:void 0,equals:a,meta:void 0,strict:n};return function(c,f){return t(c,f,i)}}var Be=E();E({strict:!0});E({circular:!0});E({circular:!0,strict:!0});E({createInternalComparator:function(){return v}});E({strict:!0,createInternalComparator:function(){return v}});E({circular:!0,createInternalComparator:function(){return v}});E({circular:!0,createInternalComparator:function(){return v},strict:!0});function E(r){r===void 0&&(r={});var e=r.circular,t=e===void 0?!1:e,s=r.createInternalComparator,a=r.createState,n=r.strict,i=n===void 0?!1:n,u=$e(r),c=Me(u),f=s?s(c):De(c);return Je({circular:t,comparator:c,createState:a,equals:f,strict:i})}function _e(r,e){return Be(r,e)}function y(r,e,t){return JSON.stringify(r,(a,n)=>{let i=n;return e&&(i=e(a,i)),i===void 0&&(i=null),i},t)}function G(r,e){function t(a){return Object.keys(a).forEach(n=>{a[n]===null?a[n]=void 0:typeof a[n]=="object"&&(a[n]=t(a[n]))}),a}const s=JSON.parse(r,e);if(s!==null)return typeof s=="object"?t(s):s}function xe(r){try{const e=y(r);return e===y(G(e))}catch{return!1}}const Ue=r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");exports.AsyncVariable=L;exports.DocumentCombinerEngine=te;exports.FIRST_SCR_BOOK_NUM=J;exports.FIRST_SCR_CHAPTER_NUM=_;exports.FIRST_SCR_VERSE_NUM=x;exports.LAST_SCR_BOOK_NUM=B;exports.PlatformEventEmitter=ie;exports.UnsubscriberAsyncList=ne;exports.aggregateUnsubscriberAsyncs=he;exports.aggregateUnsubscribers=ce;exports.createSyncProxyForAsyncObject=re;exports.debounce=k;exports.deepClone=d;exports.deepEqual=_e;exports.deserialize=G;exports.getAllObjectFunctionNames=ee;exports.getChaptersForBook=U;exports.getErrorMessage=Q;exports.groupBy=W;exports.htmlEncode=Ue;exports.isSerializable=xe;exports.isString=R;exports.newGuid=K;exports.offsetBook=oe;exports.offsetChapter=ue;exports.offsetVerse=le;exports.serialize=y;exports.wait=M;exports.waitForDuration=Y;
//# sourceMappingURL=index.cjs.map
