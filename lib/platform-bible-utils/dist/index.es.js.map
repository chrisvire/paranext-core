{"version":3,"file":"index.es.js","sources":["../src/async-variable.ts","../src/unsubscriber-async-list.ts","../src/platform-event-emitter.model.ts","../../../node_modules/@sillsdev/scripture/dist/index.es.js","../src/scripture-util.ts","../src/unsubscriber.ts","../src/util.ts","../../../node_modules/fast-equals/dist/esm/index.mjs","../src/equality-checking.ts","../src/serialization.ts"],"sourcesContent":["/** This class provides a convenient way for one task to wait on a variable that another task sets. */\nexport default class AsyncVariable<T> {\n  private readonly variableName: string;\n  private readonly promiseToValue: Promise<T>;\n  private resolver: ((value: T) => void) | undefined;\n  private rejecter: ((reason: string | undefined) => void) | undefined;\n\n  /**\n   * Creates an instance of the class\n   *\n   * @param variableName Name to use when logging about this variable\n   * @param rejectIfNotSettledWithinMS Milliseconds to wait before verifying if the promise was\n   *   settled (resolved or rejected); will reject if it has not settled by that time. Use -1 if you\n   *   do not want a timeout at all.\n   */\n  constructor(variableName: string, rejectIfNotSettledWithinMS: number = 10000) {\n    this.variableName = variableName;\n    this.promiseToValue = new Promise<T>((resolve, reject) => {\n      this.resolver = resolve;\n      this.rejecter = reject;\n    });\n    if (rejectIfNotSettledWithinMS > 0) {\n      setTimeout(() => {\n        if (this.rejecter) {\n          this.rejecter(`Timeout reached when waiting for ${this.variableName} to settle`);\n          this.complete();\n        }\n      }, rejectIfNotSettledWithinMS);\n    }\n    Object.seal(this);\n  }\n\n  /**\n   * Get this variable's promise to a value. This always returns the same promise even after the\n   * value has been resolved or rejected.\n   *\n   * @returns The promise for the value to be set\n   */\n  get promise(): Promise<T> {\n    return this.promiseToValue;\n  }\n\n  /**\n   * A simple way to see if this variable's promise was resolved or rejected already\n   *\n   * @returns Whether the variable was already resolved or rejected\n   */\n  get hasSettled(): boolean {\n    return Object.isFrozen(this);\n  }\n\n  /**\n   * Resolve this variable's promise to the given value\n   *\n   * @param value This variable's promise will resolve to this value\n   * @param throwIfAlreadySettled Determines whether to throw if the variable was already resolved\n   *   or rejected\n   */\n  resolveToValue(value: T, throwIfAlreadySettled: boolean = false): void {\n    if (this.resolver) {\n      console.debug(`${this.variableName} is being resolved now`);\n      this.resolver(value);\n      this.complete();\n    } else {\n      if (throwIfAlreadySettled) throw Error(`${this.variableName} was already settled`);\n      console.debug(`Ignoring subsequent resolution of ${this.variableName}`);\n    }\n  }\n\n  /**\n   * Reject this variable's promise for the value with the given reason\n   *\n   * @param reason This variable's promise will be rejected with this reason\n   * @param throwIfAlreadySettled Determines whether to throw if the variable was already resolved\n   *   or rejected\n   */\n  rejectWithReason(reason: string, throwIfAlreadySettled: boolean = false): void {\n    if (this.rejecter) {\n      console.debug(`${this.variableName} is being rejected now`);\n      this.rejecter(reason);\n      this.complete();\n    } else {\n      if (throwIfAlreadySettled) throw Error(`${this.variableName} was already settled`);\n      console.debug(`Ignoring subsequent rejection of ${this.variableName}`);\n    }\n  }\n\n  /** Prevent any further updates to this variable */\n  private complete(): void {\n    this.resolver = undefined;\n    this.rejecter = undefined;\n    Object.freeze(this);\n  }\n}\n","import { Dispose } from 'disposal.model';\nimport { Unsubscriber, UnsubscriberAsync } from './unsubscriber';\n\n/** Simple collection for UnsubscriberAsync objects that also provides an easy way to run them. */\nexport default class UnsubscriberAsyncList {\n  readonly unsubscribers = new Set<UnsubscriberAsync | Unsubscriber>();\n\n  constructor(private name = 'Anonymous') {}\n\n  /**\n   * Add unsubscribers to the list. Note that duplicates are not added twice.\n   *\n   * @param unsubscribers - Objects that were returned from a registration process.\n   */\n  add(...unsubscribers: (UnsubscriberAsync | Unsubscriber | Dispose)[]) {\n    unsubscribers.forEach((unsubscriber) => {\n      if ('dispose' in unsubscriber) this.unsubscribers.add(unsubscriber.dispose);\n      else this.unsubscribers.add(unsubscriber);\n    });\n  }\n\n  /**\n   * Run all unsubscribers added to this list and then clear the list.\n   *\n   * @returns `true` if all unsubscribers succeeded, `false` otherwise.\n   */\n  async runAllUnsubscribers(): Promise<boolean> {\n    const unsubs = [...this.unsubscribers].map((unsubscriber) => unsubscriber());\n    const results = await Promise.all(unsubs);\n    this.unsubscribers.clear();\n    return results.every((unsubscriberSucceeded, index) => {\n      if (!unsubscriberSucceeded)\n        console.error(`UnsubscriberAsyncList ${this.name}: Unsubscriber at index ${index} failed!`);\n\n      return unsubscriberSucceeded;\n    });\n  }\n}\n","/** Interfaces, classes, and functions related to events and event emitters */\n\nimport { Dispose } from 'disposal.model';\nimport { PlatformEvent, PlatformEventHandler } from 'platform-event';\n\n/**\n * Event manager - accepts subscriptions to an event and runs the subscription callbacks when the\n * event is emitted Use eventEmitter.event(callback) to subscribe to the event. Use\n * eventEmitter.emit(event) to run the subscriptions. Generally, this EventEmitter should be\n * private, and its event should be public. That way, the emitter is not publicized, but anyone can\n * subscribe to the event.\n */\nexport default class PlatformEventEmitter<T> implements Dispose {\n  /**\n   * Subscribes a function to run when this event is emitted.\n   *\n   * @param callback Function to run with the event when it is emitted\n   * @returns Unsubscriber function to run to stop calling the passed-in function when the event is\n   *   emitted\n   * @alias event\n   */\n  subscribe = this.event;\n\n  /** All callback functions that will run when this event is emitted. Lazy loaded */\n  private subscriptions?: PlatformEventHandler<T>[];\n  /** Event for listeners to subscribe to. Lazy loaded */\n  private lazyEvent?: PlatformEvent<T>;\n  /** Whether this emitter has been disposed */\n  private isDisposed = false;\n\n  /**\n   * Event for listeners to subscribe to. Subscribes a function to run when this event is emitted.\n   * Use like `const unsubscriber = event(callback)`\n   *\n   * @param callback Function to run with the event when it is emitted\n   * @returns Unsubscriber function to run to stop calling the passed-in function when the event is\n   *   emitted\n   */\n  get event(): PlatformEvent<T> {\n    this.assertNotDisposed();\n\n    if (!this.lazyEvent) {\n      this.lazyEvent = (callback) => {\n        if (!callback || typeof callback !== 'function')\n          throw new Error(`Event handler callback must be a function!`);\n\n        // Initialize this.subscriptions if it does not exist\n        if (!this.subscriptions) this.subscriptions = [];\n\n        this.subscriptions.push(callback);\n\n        return () => {\n          if (!this.subscriptions) return false; // Did not find any subscribed callbacks\n\n          const callbackIndex = this.subscriptions.indexOf(callback);\n\n          if (callbackIndex < 0) return false; // Did not find this callback in the subscriptions\n\n          // Remove the callback\n          this.subscriptions.splice(callbackIndex, 1);\n\n          return true;\n        };\n      };\n    }\n    return this.lazyEvent;\n  }\n\n  /** Disposes of this event, preparing it to release from memory */\n  dispose = () => {\n    return this.disposeFn();\n  };\n\n  /**\n   * Runs the subscriptions for the event\n   *\n   * @param event Event data to provide to subscribed callbacks\n   */\n  emit = (event: T) => {\n    // Do not do anything other than emitFn here. This emit is just binding `this` to emitFn\n    this.emitFn(event);\n  };\n\n  /**\n   * Function that runs the subscriptions for the event. Added here so children can override emit\n   * and still call the base functionality. See NetworkEventEmitter.emit for example\n   */\n  protected emitFn(event: T) {\n    this.assertNotDisposed();\n\n    this.subscriptions?.forEach((callback) => callback(event));\n  }\n\n  /** Check to make sure this emitter is not disposed. Throw if it is */\n  protected assertNotDisposed() {\n    if (this.isDisposed) throw new Error('Emitter is disposed');\n  }\n\n  /**\n   * Disposes of this event, preparing it to release from memory. Added here so children can\n   * override emit and still call the base functionality.\n   */\n  protected disposeFn() {\n    this.assertNotDisposed();\n\n    this.isDisposed = true;\n    this.subscriptions = undefined;\n    this.lazyEvent = undefined;\n    return Promise.resolve(true);\n  }\n}\n","var P = Object.defineProperty;\nvar R = (t, e, s) => e in t ? P(t, e, { enumerable: !0, configurable: !0, writable: !0, value: s }) : t[e] = s;\nvar i = (t, e, s) => (R(t, typeof e != \"symbol\" ? e + \"\" : e, s), s);\nclass Z {\n  constructor() {\n    i(this, \"books\");\n    i(this, \"firstSelectedBookNum\");\n    i(this, \"lastSelectedBookNum\");\n    i(this, \"count\");\n    i(this, \"selectedBookNumbers\");\n    i(this, \"selectedBookIds\");\n  }\n}\nconst m = [\n  \"GEN\",\n  \"EXO\",\n  \"LEV\",\n  \"NUM\",\n  \"DEU\",\n  \"JOS\",\n  \"JDG\",\n  \"RUT\",\n  \"1SA\",\n  \"2SA\",\n  // 10\n  \"1KI\",\n  \"2KI\",\n  \"1CH\",\n  \"2CH\",\n  \"EZR\",\n  \"NEH\",\n  \"EST\",\n  \"JOB\",\n  \"PSA\",\n  \"PRO\",\n  // 20\n  \"ECC\",\n  \"SNG\",\n  \"ISA\",\n  \"JER\",\n  \"LAM\",\n  \"EZK\",\n  \"DAN\",\n  \"HOS\",\n  \"JOL\",\n  \"AMO\",\n  // 30\n  \"OBA\",\n  \"JON\",\n  \"MIC\",\n  \"NAM\",\n  \"HAB\",\n  \"ZEP\",\n  \"HAG\",\n  \"ZEC\",\n  \"MAL\",\n  \"MAT\",\n  // 40\n  \"MRK\",\n  \"LUK\",\n  \"JHN\",\n  \"ACT\",\n  \"ROM\",\n  \"1CO\",\n  \"2CO\",\n  \"GAL\",\n  \"EPH\",\n  \"PHP\",\n  // 50\n  \"COL\",\n  \"1TH\",\n  \"2TH\",\n  \"1TI\",\n  \"2TI\",\n  \"TIT\",\n  \"PHM\",\n  \"HEB\",\n  \"JAS\",\n  \"1PE\",\n  // 60\n  \"2PE\",\n  \"1JN\",\n  \"2JN\",\n  \"3JN\",\n  \"JUD\",\n  \"REV\",\n  \"TOB\",\n  \"JDT\",\n  \"ESG\",\n  \"WIS\",\n  // 70\n  \"SIR\",\n  \"BAR\",\n  \"LJE\",\n  \"S3Y\",\n  \"SUS\",\n  \"BEL\",\n  \"1MA\",\n  \"2MA\",\n  \"3MA\",\n  \"4MA\",\n  // 80\n  \"1ES\",\n  \"2ES\",\n  \"MAN\",\n  \"PS2\",\n  \"ODA\",\n  \"PSS\",\n  \"JSA\",\n  // actual variant text for JOS, now in LXA text\n  \"JDB\",\n  // actual variant text for JDG, now in LXA text\n  \"TBS\",\n  // actual variant text for TOB, now in LXA text\n  \"SST\",\n  // actual variant text for SUS, now in LXA text // 90\n  \"DNT\",\n  // actual variant text for DAN, now in LXA text\n  \"BLT\",\n  // actual variant text for BEL, now in LXA text\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\",\n  \"FRT\",\n  // 100\n  \"BAK\",\n  \"OTH\",\n  \"3ES\",\n  // Used previously but really should be 2ES\n  \"EZA\",\n  // Used to be called 4ES, but not actually in any known project\n  \"5EZ\",\n  // Used to be called 5ES, but not actually in any known project\n  \"6EZ\",\n  // Used to be called 6ES, but not actually in any known project\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  // 110\n  \"NDX\",\n  \"DAG\",\n  \"PS3\",\n  \"2BA\",\n  \"LBA\",\n  \"JUB\",\n  \"ENO\",\n  \"1MQ\",\n  \"2MQ\",\n  \"3MQ\",\n  // 120\n  \"REP\",\n  \"4BA\",\n  \"LAO\"\n], B = [\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\",\n  \"FRT\",\n  \"BAK\",\n  \"OTH\",\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  \"NDX\"\n], X = [\n  \"Genesis\",\n  \"Exodus\",\n  \"Leviticus\",\n  \"Numbers\",\n  \"Deuteronomy\",\n  \"Joshua\",\n  \"Judges\",\n  \"Ruth\",\n  \"1 Samuel\",\n  \"2 Samuel\",\n  \"1 Kings\",\n  \"2 Kings\",\n  \"1 Chronicles\",\n  \"2 Chronicles\",\n  \"Ezra\",\n  \"Nehemiah\",\n  \"Esther (Hebrew)\",\n  \"Job\",\n  \"Psalms\",\n  \"Proverbs\",\n  \"Ecclesiastes\",\n  \"Song of Songs\",\n  \"Isaiah\",\n  \"Jeremiah\",\n  \"Lamentations\",\n  \"Ezekiel\",\n  \"Daniel (Hebrew)\",\n  \"Hosea\",\n  \"Joel\",\n  \"Amos\",\n  \"Obadiah\",\n  \"Jonah\",\n  \"Micah\",\n  \"Nahum\",\n  \"Habakkuk\",\n  \"Zephaniah\",\n  \"Haggai\",\n  \"Zechariah\",\n  \"Malachi\",\n  \"Matthew\",\n  \"Mark\",\n  \"Luke\",\n  \"John\",\n  \"Acts\",\n  \"Romans\",\n  \"1 Corinthians\",\n  \"2 Corinthians\",\n  \"Galatians\",\n  \"Ephesians\",\n  \"Philippians\",\n  \"Colossians\",\n  \"1 Thessalonians\",\n  \"2 Thessalonians\",\n  \"1 Timothy\",\n  \"2 Timothy\",\n  \"Titus\",\n  \"Philemon\",\n  \"Hebrews\",\n  \"James\",\n  \"1 Peter\",\n  \"2 Peter\",\n  \"1 John\",\n  \"2 John\",\n  \"3 John\",\n  \"Jude\",\n  \"Revelation\",\n  \"Tobit\",\n  \"Judith\",\n  \"Esther Greek\",\n  \"Wisdom of Solomon\",\n  \"Sirach (Ecclesiasticus)\",\n  \"Baruch\",\n  \"Letter of Jeremiah\",\n  \"Song of 3 Young Men\",\n  \"Susanna\",\n  \"Bel and the Dragon\",\n  \"1 Maccabees\",\n  \"2 Maccabees\",\n  \"3 Maccabees\",\n  \"4 Maccabees\",\n  \"1 Esdras (Greek)\",\n  \"2 Esdras (Latin)\",\n  \"Prayer of Manasseh\",\n  \"Psalm 151\",\n  \"Odes\",\n  \"Psalms of Solomon\",\n  // WARNING, if you change the spelling of the *obsolete* tag be sure to update\n  // IsObsolete routine\n  \"Joshua A. *obsolete*\",\n  \"Judges B. *obsolete*\",\n  \"Tobit S. *obsolete*\",\n  \"Susanna Th. *obsolete*\",\n  \"Daniel Th. *obsolete*\",\n  \"Bel Th. *obsolete*\",\n  \"Extra A\",\n  \"Extra B\",\n  \"Extra C\",\n  \"Extra D\",\n  \"Extra E\",\n  \"Extra F\",\n  \"Extra G\",\n  \"Front Matter\",\n  \"Back Matter\",\n  \"Other Matter\",\n  \"3 Ezra *obsolete*\",\n  \"Apocalypse of Ezra\",\n  \"5 Ezra (Latin Prologue)\",\n  \"6 Ezra (Latin Epilogue)\",\n  \"Introduction\",\n  \"Concordance \",\n  \"Glossary \",\n  \"Topical Index\",\n  \"Names Index\",\n  \"Daniel Greek\",\n  \"Psalms 152-155\",\n  \"2 Baruch (Apocalypse)\",\n  \"Letter of Baruch\",\n  \"Jubilees\",\n  \"Enoch\",\n  \"1 Meqabyan\",\n  \"2 Meqabyan\",\n  \"3 Meqabyan\",\n  \"Reproof (Proverbs 25-31)\",\n  \"4 Baruch (Rest of Baruch)\",\n  \"Laodiceans\"\n], E = U();\nfunction g(t, e = !0) {\n  return e && (t = t.toUpperCase()), t in E ? E[t] : 0;\n}\nfunction k(t) {\n  return g(t) > 0;\n}\nfunction x(t) {\n  const e = typeof t == \"string\" ? g(t) : t;\n  return e >= 40 && e <= 66;\n}\nfunction T(t) {\n  return (typeof t == \"string\" ? g(t) : t) <= 39;\n}\nfunction O(t) {\n  return t <= 66;\n}\nfunction V(t) {\n  const e = typeof t == \"string\" ? g(t) : t;\n  return I(e) && !O(e);\n}\nfunction* _() {\n  for (let t = 1; t <= m.length; t++)\n    yield t;\n}\nconst L = 1, S = m.length;\nfunction G() {\n  return [\"XXA\", \"XXB\", \"XXC\", \"XXD\", \"XXE\", \"XXF\", \"XXG\"];\n}\nfunction C(t, e = \"***\") {\n  const s = t - 1;\n  return s < 0 || s >= m.length ? e : m[s];\n}\nfunction A(t) {\n  return t <= 0 || t > S ? \"******\" : X[t - 1];\n}\nfunction H(t) {\n  return A(g(t));\n}\nfunction I(t) {\n  const e = typeof t == \"number\" ? C(t) : t;\n  return k(e) && !B.includes(e);\n}\nfunction y(t) {\n  const e = typeof t == \"number\" ? C(t) : t;\n  return k(e) && B.includes(e);\n}\nfunction q(t) {\n  return X[t - 1].includes(\"*obsolete*\");\n}\nfunction U() {\n  const t = {};\n  for (let e = 0; e < m.length; e++)\n    t[m[e]] = e + 1;\n  return t;\n}\nconst N = {\n  allBookIds: m,\n  nonCanonicalIds: B,\n  bookIdToNumber: g,\n  isBookIdValid: k,\n  isBookNT: x,\n  isBookOT: T,\n  isBookOTNT: O,\n  isBookDC: V,\n  allBookNumbers: _,\n  firstBook: L,\n  lastBook: S,\n  extraBooks: G,\n  bookNumberToId: C,\n  bookNumberToEnglishName: A,\n  bookIdToEnglishName: H,\n  isCanonical: I,\n  isExtraMaterial: y,\n  isObsolete: q\n};\nvar c = /* @__PURE__ */ ((t) => (t[t.Unknown = 0] = \"Unknown\", t[t.Original = 1] = \"Original\", t[t.Septuagint = 2] = \"Septuagint\", t[t.Vulgate = 3] = \"Vulgate\", t[t.English = 4] = \"English\", t[t.RussianProtestant = 5] = \"RussianProtestant\", t[t.RussianOrthodox = 6] = \"RussianOrthodox\", t))(c || {});\nconst f = class {\n  // private versInfo: Versification;\n  constructor(e) {\n    i(this, \"name\");\n    i(this, \"fullPath\");\n    i(this, \"isPresent\");\n    i(this, \"hasVerseSegments\");\n    i(this, \"isCustomized\");\n    i(this, \"baseVersification\");\n    i(this, \"scriptureBooks\");\n    i(this, \"_type\");\n    if (e != null)\n      typeof e == \"string\" ? this.name = e : this._type = e;\n    else\n      throw new Error(\"Argument null\");\n  }\n  get type() {\n    return this._type;\n  }\n  equals(e) {\n    return !e.type || !this.type ? !1 : e.type === this.type;\n  }\n};\nlet u = f;\ni(u, \"Original\", new f(c.Original)), i(u, \"Septuagint\", new f(c.Septuagint)), i(u, \"Vulgate\", new f(c.Vulgate)), i(u, \"English\", new f(c.English)), i(u, \"RussianProtestant\", new f(c.RussianProtestant)), i(u, \"RussianOrthodox\", new f(c.RussianOrthodox));\nfunction M(t, e) {\n  const s = e[0];\n  for (let n = 1; n < e.length; n++)\n    t = t.split(e[n]).join(s);\n  return t.split(s);\n}\nvar D = /* @__PURE__ */ ((t) => (t[t.Valid = 0] = \"Valid\", t[t.UnknownVersification = 1] = \"UnknownVersification\", t[t.OutOfRange = 2] = \"OutOfRange\", t[t.VerseOutOfOrder = 3] = \"VerseOutOfOrder\", t[t.VerseRepeated = 4] = \"VerseRepeated\", t))(D || {});\nconst r = class {\n  constructor(e, s, n, o) {\n    i(this, \"firstChapter\");\n    i(this, \"lastChapter\");\n    i(this, \"lastVerse\");\n    i(this, \"hasSegmentsDefined\");\n    i(this, \"text\");\n    i(this, \"BBBCCCVVVS\");\n    i(this, \"longHashCode\");\n    /** The versification of the reference. */\n    i(this, \"versification\");\n    i(this, \"rtlMark\", \"‏\");\n    i(this, \"_bookNum\", 0);\n    i(this, \"_chapterNum\", 0);\n    i(this, \"_verseNum\", 0);\n    i(this, \"_verse\");\n    if (n == null && o == null)\n      if (e != null && typeof e == \"string\") {\n        const a = e, h = s != null && s instanceof u ? s : void 0;\n        this.setEmpty(h), this.parse(a);\n      } else if (e != null && typeof e == \"number\") {\n        const a = s != null && s instanceof u ? s : void 0;\n        this.setEmpty(a), this._verseNum = e % r.chapterDigitShifter, this._chapterNum = Math.floor(\n          e % r.bookDigitShifter / r.chapterDigitShifter\n        ), this._bookNum = Math.floor(e / r.bookDigitShifter);\n      } else if (s == null)\n        if (e != null && e instanceof r) {\n          const a = e;\n          this._bookNum = a.bookNum, this._chapterNum = a.chapterNum, this._verseNum = a.verseNum, this._verse = a.verse, this.versification = a.versification;\n        } else {\n          if (e == null)\n            return;\n          const a = e instanceof u ? e : r.defaultVersification;\n          this.setEmpty(a);\n        }\n      else\n        throw new Error(\"VerseRef constructor not supported.\");\n    else if (e != null && s != null && n != null)\n      if (typeof e == \"string\" && typeof s == \"string\" && typeof n == \"string\")\n        this.setEmpty(o), this.updateInternal(e, s, n);\n      else if (typeof e == \"number\" && typeof s == \"number\" && typeof n == \"number\")\n        this._bookNum = e, this._chapterNum = s, this._verseNum = n, this.versification = o ?? r.defaultVersification;\n      else\n        throw new Error(\"VerseRef constructor not supported.\");\n    else\n      throw new Error(\"VerseRef constructor not supported.\");\n  }\n  /**\n   * @deprecated Will be removed in v2. Replace `VerseRef.parse('...')` with `new VerseRef('...')`\n   * or refactor to use `VerseRef.tryParse('...')` which has a different return type.\n   */\n  static parse(e, s = r.defaultVersification) {\n    const n = new r(s);\n    return n.parse(e), n;\n  }\n  /**\n   * Determines if the verse string is in a valid format (does not consider versification).\n   */\n  static isVerseParseable(e) {\n    return e.length > 0 && \"0123456789\".includes(e[0]) && !e.endsWith(this.verseRangeSeparator) && !e.endsWith(this.verseSequenceIndicator);\n  }\n  /**\n   * Tries to parse the specified string into a verse reference.\n   * @param str - The string to attempt to parse.\n   * @returns success: `true` if the specified string was successfully parsed, `false` otherwise.\n   * @returns verseRef: The result of the parse if successful, or empty VerseRef if it failed\n   */\n  static tryParse(e) {\n    let s;\n    try {\n      return s = r.parse(e), { success: !0, verseRef: s };\n    } catch (n) {\n      if (n instanceof p)\n        return s = new r(), { success: !1, verseRef: s };\n      throw n;\n    }\n  }\n  /**\n   * Gets the reference as a comparable integer where the book, chapter, and verse each occupy 3\n   * digits.\n   * @param bookNum - Book number (this is 1-based, not an index).\n   * @param chapterNum - Chapter number.\n   * @param verseNum - Verse number.\n   * @returns The reference as a comparable integer where the book, chapter, and verse each occupy 3\n   * digits.\n   */\n  static getBBBCCCVVV(e, s, n) {\n    return e % r.bcvMaxValue * r.bookDigitShifter + (s >= 0 ? s % r.bcvMaxValue * r.chapterDigitShifter : 0) + (n >= 0 ? n % r.bcvMaxValue : 0);\n  }\n  /**\n   * Parses a verse string and gets the leading numeric portion as a number.\n   * @param verseStr - verse string to parse\n   * @returns true if the entire string could be parsed as a single, simple verse number (1-999);\n   *    false if the verse string represented a verse bridge, contained segment letters, or was invalid\n   */\n  static tryGetVerseNum(e) {\n    let s;\n    if (!e)\n      return s = -1, { success: !0, vNum: s };\n    s = 0;\n    let n;\n    for (let o = 0; o < e.length; o++) {\n      if (n = e[o], n < \"0\" || n > \"9\")\n        return o === 0 && (s = -1), { success: !1, vNum: s };\n      if (s = s * 10 + +n - +\"0\", s > r.bcvMaxValue)\n        return s = -1, { success: !1, vNum: s };\n    }\n    return { success: !0, vNum: s };\n  }\n  /**\n   * Checks to see if a VerseRef hasn't been set - all values are the default.\n   */\n  get isDefault() {\n    return this.bookNum === 0 && this.chapterNum === 0 && this.verseNum === 0 && this.versification == null;\n  }\n  /**\n   * Gets whether the verse contains multiple verses.\n   */\n  get hasMultiple() {\n    return this._verse != null && (this._verse.includes(r.verseRangeSeparator) || this._verse.includes(r.verseSequenceIndicator));\n  }\n  /**\n   * Gets or sets the book of the reference. Book is the 3-letter abbreviation in capital letters,\n   * e.g. `'MAT'`.\n   */\n  get book() {\n    return N.bookNumberToId(this.bookNum, \"\");\n  }\n  set book(e) {\n    this.bookNum = N.bookIdToNumber(e);\n  }\n  /**\n   * Gets or sets the chapter of the reference,. e.g. `'3'`.\n   */\n  get chapter() {\n    return this.isDefault || this._chapterNum < 0 ? \"\" : this._chapterNum.toString();\n  }\n  set chapter(e) {\n    const s = +e;\n    this._chapterNum = Number.isInteger(s) ? s : -1;\n  }\n  /**\n   * Gets or sets the verse of the reference, including range, segments, and sequences, e.g. `'4'`,\n   * or `'4b-5a, 7'`.\n   */\n  get verse() {\n    return this._verse != null ? this._verse : this.isDefault || this._verseNum < 0 ? \"\" : this._verseNum.toString();\n  }\n  set verse(e) {\n    const { success: s, vNum: n } = r.tryGetVerseNum(e);\n    this._verse = s ? void 0 : e.replace(this.rtlMark, \"\"), this._verseNum = n, !(this._verseNum >= 0) && ({ vNum: this._verseNum } = r.tryGetVerseNum(this._verse));\n  }\n  /**\n   * Get or set Book based on book number, e.g. `42`.\n   */\n  get bookNum() {\n    return this._bookNum;\n  }\n  set bookNum(e) {\n    if (e <= 0 || e > N.lastBook)\n      throw new p(\n        \"BookNum must be greater than zero and less than or equal to last book\"\n      );\n    this._bookNum = e;\n  }\n  /**\n   * Gets or sets the chapter number, e.g. `3`. `-1` if not valid.\n   */\n  get chapterNum() {\n    return this._chapterNum;\n  }\n  set chapterNum(e) {\n    this.chapterNum = e;\n  }\n  /**\n   * Gets or sets verse start number, e.g. `4`. `-1` if not valid.\n   */\n  get verseNum() {\n    return this._verseNum;\n  }\n  set verseNum(e) {\n    this._verseNum = e;\n  }\n  /**\n   * String representing the versification (should ONLY be used for serialization/deserialization).\n   *\n   * @remarks This is for backwards compatibility when ScrVers was an enumeration.\n   */\n  get versificationStr() {\n    var e;\n    return (e = this.versification) == null ? void 0 : e.name;\n  }\n  set versificationStr(e) {\n    this.versification = this.versification != null ? new u(e) : void 0;\n  }\n  /**\n   * Determines if the reference is valid.\n   */\n  get valid() {\n    return this.validStatus === 0;\n  }\n  /**\n   * Get the valid status for this reference.\n   */\n  get validStatus() {\n    return this.validateVerse(r.verseRangeSeparators, r.verseSequenceIndicators);\n  }\n  /**\n   * Gets the reference as a comparable integer where the book,\n   * chapter, and verse each occupy three digits and the verse is 0.\n   */\n  get BBBCCC() {\n    return r.getBBBCCCVVV(this._bookNum, this._chapterNum, 0);\n  }\n  /**\n   * Gets the reference as a comparable integer where the book,\n   * chapter, and verse each occupy three digits. If verse is not null\n   * (i.e., this reference represents a complex reference with verse\n   * segments or bridge) this cannot be used for an exact comparison.\n   */\n  get BBBCCCVVV() {\n    return r.getBBBCCCVVV(this._bookNum, this._chapterNum, this._verseNum);\n  }\n  /**\n   * Gets whether the verse is defined as an excluded verse in the versification.\n   * Does not handle verse ranges.\n   */\n  // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n  get isExcluded() {\n    return !1;\n  }\n  /**\n   * Parses the reference in the specified string.\n   * Optionally versification can follow reference as in GEN 3:11/4\n   * Throw an exception if\n   * - invalid book name\n   * - chapter number is missing or not a number\n   * - verse number is missing or does not start with a number\n   * - versification is invalid\n   * @param verseStr - string to parse e.g. 'MAT 3:11'\n   */\n  parse(e) {\n    if (e = e.replace(this.rtlMark, \"\"), e.includes(\"/\")) {\n      const a = e.split(\"/\");\n      if (e = a[0], a.length > 1)\n        try {\n          const h = +a[1].trim();\n          this.versification = new u(c[h]);\n        } catch {\n          throw new p(\"Invalid reference : \" + e);\n        }\n    }\n    const s = e.trim().split(\" \");\n    if (s.length !== 2)\n      throw new p(\"Invalid reference : \" + e);\n    const n = s[1].split(\":\"), o = +n[0];\n    if (n.length !== 2 || N.bookIdToNumber(s[0]) === 0 || !Number.isInteger(o) || o < 0 || !r.isVerseParseable(n[1]))\n      throw new p(\"Invalid reference : \" + e);\n    this.updateInternal(s[0], n[0], n[1]);\n  }\n  /**\n   * Simplifies this verse ref so that it has no bridging of verses or\n   * verse segments like `'1a'`.\n   */\n  simplify() {\n    this._verse = void 0;\n  }\n  /**\n   * Makes a clone of the reference.\n   *\n   * @returns The cloned VerseRef.\n   */\n  clone() {\n    return new r(this);\n  }\n  toString() {\n    const e = this.book;\n    return e === \"\" ? \"\" : `${e} ${this.chapter}:${this.verse}`;\n  }\n  /**\n   * Compares this `VerseRef` with supplied one.\n   * @param verseRef - `VerseRef` to compare this one to.\n   * @returns `true` if this `VerseRef` is equal to the supplied on, `false` otherwise.\n   */\n  equals(e) {\n    return e._bookNum === this._bookNum && e._chapterNum === this._chapterNum && e._verseNum === this._verseNum && e._verse === this._verse && e.versification != null && this.versification != null && e.versification.equals(this.versification);\n  }\n  /**\n   * Enumerate all individual verses contained in a VerseRef.\n   * Verse ranges are indicated by \"-\" and consecutive verses by \",\"s.\n   * Examples:\n   * GEN 1:2 returns GEN 1:2\n   * GEN 1:1a-3b,5 returns GEN 1:1a, GEN 1:2, GEN 1:3b, GEN 1:5\n   * GEN 1:2a-2c returns //! ??????\n   *\n   * @param specifiedVersesOnly - if set to <c>true</c> return only verses that are\n   * explicitly specified only, not verses within a range. Defaults to `false`.\n   * @param verseRangeSeparators - Verse range separators.\n   * Defaults to `VerseRef.verseRangeSeparators`.\n   * @param verseSequenceSeparators - Verse sequence separators.\n   * Defaults to `VerseRef.verseSequenceIndicators`.\n   * @returns An array of all single verse references in this VerseRef.\n   */\n  allVerses(e = !1, s = r.verseRangeSeparators, n = r.verseSequenceIndicators) {\n    if (this._verse == null || this.chapterNum <= 0)\n      return [this.clone()];\n    const o = [], a = M(this._verse, n);\n    for (const h of a.map((d) => M(d, s))) {\n      const d = this.clone();\n      d.verse = h[0];\n      const w = d.verseNum;\n      if (o.push(d), h.length > 1) {\n        const v = this.clone();\n        if (v.verse = h[1], !e)\n          for (let b = w + 1; b < v.verseNum; b++) {\n            const J = new r(\n              this._bookNum,\n              this._chapterNum,\n              b,\n              this.versification\n            );\n            this.isExcluded || o.push(J);\n          }\n        o.push(v);\n      }\n    }\n    return o;\n  }\n  /**\n   * Validates a verse number using the supplied separators rather than the defaults.\n   */\n  validateVerse(e, s) {\n    if (!this.verse)\n      return this.internalValid;\n    let n = 0;\n    for (const o of this.allVerses(!0, e, s)) {\n      const a = o.internalValid;\n      if (a !== 0)\n        return a;\n      const h = o.BBBCCCVVV;\n      if (n > h)\n        return 3;\n      if (n === h)\n        return 4;\n      n = h;\n    }\n    return 0;\n  }\n  /**\n   * Gets whether a single verse reference is valid.\n   */\n  get internalValid() {\n    return this.versification == null ? 1 : this._bookNum <= 0 || this._bookNum > N.lastBook ? 2 : 0;\n  }\n  setEmpty(e = r.defaultVersification) {\n    this._bookNum = 0, this._chapterNum = -1, this._verse = void 0, this.versification = e;\n  }\n  updateInternal(e, s, n) {\n    this.bookNum = N.bookIdToNumber(e), this.chapter = s, this.verse = n;\n  }\n};\nlet l = r;\ni(l, \"defaultVersification\", u.English), i(l, \"verseRangeSeparator\", \"-\"), i(l, \"verseSequenceIndicator\", \",\"), i(l, \"verseRangeSeparators\", [r.verseRangeSeparator]), i(l, \"verseSequenceIndicators\", [r.verseSequenceIndicator]), i(l, \"chapterDigitShifter\", 1e3), i(l, \"bookDigitShifter\", r.chapterDigitShifter * r.chapterDigitShifter), i(l, \"bcvMaxValue\", r.chapterDigitShifter - 1), /**\n * The valid status of the VerseRef.\n */\ni(l, \"ValidStatusType\", D);\nclass p extends Error {\n}\nexport {\n  Z as BookSet,\n  N as Canon,\n  u as ScrVers,\n  c as ScrVersType,\n  l as VerseRef,\n  p as VerseRefException\n};\n//# sourceMappingURL=index.es.js.map\n","import { Canon } from '@sillsdev/scripture';\nimport { ComboBoxLabelOption } from 'platform-bible-react';\nimport { BookInfo, ScriptureReference } from './scripture.model';\n\nconst scrBookData: BookInfo[] = [\n  { shortName: 'ERR', fullNames: ['ERROR'], chapters: -1 },\n  { shortName: 'GEN', fullNames: ['Genesis'], chapters: 50 },\n  { shortName: 'EXO', fullNames: ['Exodus'], chapters: 40 },\n  { shortName: 'LEV', fullNames: ['Leviticus'], chapters: 27 },\n  { shortName: 'NUM', fullNames: ['Numbers'], chapters: 36 },\n  { shortName: 'DEU', fullNames: ['Deuteronomy'], chapters: 34 },\n  { shortName: 'JOS', fullNames: ['Joshua'], chapters: 24 },\n  { shortName: 'JDG', fullNames: ['Judges'], chapters: 21 },\n  { shortName: 'RUT', fullNames: ['Ruth'], chapters: 4 },\n  { shortName: '1SA', fullNames: ['1 Samuel'], chapters: 31 },\n  { shortName: '2SA', fullNames: ['2 Samuel'], chapters: 24 },\n  { shortName: '1KI', fullNames: ['1 Kings'], chapters: 22 },\n  { shortName: '2KI', fullNames: ['2 Kings'], chapters: 25 },\n  { shortName: '1CH', fullNames: ['1 Chronicles'], chapters: 29 },\n  { shortName: '2CH', fullNames: ['2 Chronicles'], chapters: 36 },\n  { shortName: 'EZR', fullNames: ['Ezra'], chapters: 10 },\n  { shortName: 'NEH', fullNames: ['Nehemiah'], chapters: 13 },\n  { shortName: 'EST', fullNames: ['Esther'], chapters: 10 },\n  { shortName: 'JOB', fullNames: ['Job'], chapters: 42 },\n  { shortName: 'PSA', fullNames: ['Psalm', 'Psalms'], chapters: 150 },\n  { shortName: 'PRO', fullNames: ['Proverbs'], chapters: 31 },\n  { shortName: 'ECC', fullNames: ['Ecclesiastes'], chapters: 12 },\n  { shortName: 'SNG', fullNames: ['Song of Solomon', 'Song of Songs'], chapters: 8 },\n  { shortName: 'ISA', fullNames: ['Isaiah'], chapters: 66 },\n  { shortName: 'JER', fullNames: ['Jeremiah'], chapters: 52 },\n  { shortName: 'LAM', fullNames: ['Lamentations'], chapters: 5 },\n  { shortName: 'EZK', fullNames: ['Ezekiel'], chapters: 48 },\n  { shortName: 'DAN', fullNames: ['Daniel'], chapters: 12 },\n  { shortName: 'HOS', fullNames: ['Hosea'], chapters: 14 },\n  { shortName: 'JOL', fullNames: ['Joel'], chapters: 3 },\n  { shortName: 'AMO', fullNames: ['Amos'], chapters: 9 },\n  { shortName: 'OBA', fullNames: ['Obadiah'], chapters: 1 },\n  { shortName: 'JON', fullNames: ['Jonah'], chapters: 4 },\n  { shortName: 'MIC', fullNames: ['Micah'], chapters: 7 },\n  { shortName: 'NAM', fullNames: ['Nahum'], chapters: 3 },\n  { shortName: 'HAB', fullNames: ['Habakkuk'], chapters: 3 },\n  { shortName: 'ZEP', fullNames: ['Zephaniah'], chapters: 3 },\n  { shortName: 'HAG', fullNames: ['Haggai'], chapters: 2 },\n  { shortName: 'ZEC', fullNames: ['Zechariah'], chapters: 14 },\n  { shortName: 'MAL', fullNames: ['Malachi'], chapters: 4 },\n  { shortName: 'MAT', fullNames: ['Matthew'], chapters: 28 },\n  { shortName: 'MRK', fullNames: ['Mark'], chapters: 16 },\n  { shortName: 'LUK', fullNames: ['Luke'], chapters: 24 },\n  { shortName: 'JHN', fullNames: ['John'], chapters: 21 },\n  { shortName: 'ACT', fullNames: ['Acts'], chapters: 28 },\n  { shortName: 'ROM', fullNames: ['Romans'], chapters: 16 },\n  { shortName: '1CO', fullNames: ['1 Corinthians'], chapters: 16 },\n  { shortName: '2CO', fullNames: ['2 Corinthians'], chapters: 13 },\n  { shortName: 'GAL', fullNames: ['Galatians'], chapters: 6 },\n  { shortName: 'EPH', fullNames: ['Ephesians'], chapters: 6 },\n  { shortName: 'PHP', fullNames: ['Philippians'], chapters: 4 },\n  { shortName: 'COL', fullNames: ['Colossians'], chapters: 4 },\n  { shortName: '1TH', fullNames: ['1 Thessalonians'], chapters: 5 },\n  { shortName: '2TH', fullNames: ['2 Thessalonians'], chapters: 3 },\n  { shortName: '1TI', fullNames: ['1 Timothy'], chapters: 6 },\n  { shortName: '2TI', fullNames: ['2 Timothy'], chapters: 4 },\n  { shortName: 'TIT', fullNames: ['Titus'], chapters: 3 },\n  { shortName: 'PHM', fullNames: ['Philemon'], chapters: 1 },\n  { shortName: 'HEB', fullNames: ['Hebrews'], chapters: 13 },\n  { shortName: 'JAS', fullNames: ['James'], chapters: 5 },\n  { shortName: '1PE', fullNames: ['1 Peter'], chapters: 5 },\n  { shortName: '2PE', fullNames: ['2 Peter'], chapters: 3 },\n  { shortName: '1JN', fullNames: ['1 John'], chapters: 5 },\n  { shortName: '2JN', fullNames: ['2 John'], chapters: 1 },\n  { shortName: '3JN', fullNames: ['3 John'], chapters: 1 },\n  { shortName: 'JUD', fullNames: ['Jude'], chapters: 1 },\n  { shortName: 'REV', fullNames: ['Revelation'], chapters: 22 },\n];\n\nexport interface BookNameOption extends ComboBoxLabelOption {\n  bookId: string;\n}\n\nlet bookNameOptions: BookNameOption[];\n\n/**\n * Gets ComboBox options for book names. Use the _bookId_ for reference rather than the _label_ to\n * aid in localization.\n *\n * @remarks\n * This can be localized by loading _label_ with the localized book name.\n * @returns An array of ComboBox options for book names.\n */\nexport const getBookNameOptions = () => {\n  if (!bookNameOptions) {\n    bookNameOptions = Canon.allBookIds.map((bookId) => ({\n      bookId,\n      label: Canon.bookIdToEnglishName(bookId),\n    }));\n  }\n  return bookNameOptions;\n};\n\nexport const FIRST_SCR_BOOK_NUM = 1;\nexport const LAST_SCR_BOOK_NUM = scrBookData.length - 1;\nexport const FIRST_SCR_CHAPTER_NUM = 1;\nexport const FIRST_SCR_VERSE_NUM = 1;\n\nexport const getChaptersForBook = (bookNum: number): number => {\n  return scrBookData[bookNum]?.chapters ?? -1;\n};\n\nexport const offsetBook = (scrRef: ScriptureReference, offset: number): ScriptureReference => ({\n  bookNum: Math.max(FIRST_SCR_BOOK_NUM, Math.min(scrRef.bookNum + offset, LAST_SCR_BOOK_NUM)),\n  chapterNum: 1,\n  verseNum: 1,\n});\n\nexport const offsetChapter = (scrRef: ScriptureReference, offset: number): ScriptureReference => ({\n  ...scrRef,\n  chapterNum: Math.min(\n    Math.max(FIRST_SCR_CHAPTER_NUM, scrRef.chapterNum + offset),\n    getChaptersForBook(scrRef.bookNum),\n  ),\n  verseNum: 1,\n});\n\nexport const offsetVerse = (scrRef: ScriptureReference, offset: number): ScriptureReference => ({\n  ...scrRef,\n  verseNum: Math.max(FIRST_SCR_VERSE_NUM, scrRef.verseNum + offset),\n});\n","/** Function to run to dispose of something. Returns true if successfully unsubscribed */\nexport type Unsubscriber = () => boolean;\n\n/**\n * Returns an Unsubscriber function that combines all the unsubscribers passed in.\n *\n * @param unsubscribers All unsubscribers to aggregate into one unsubscriber\n * @returns Function that unsubscribes from all passed in unsubscribers when run\n */\nexport const aggregateUnsubscribers = (unsubscribers: Unsubscriber[]): Unsubscriber => {\n  return (...args) => {\n    // Run the unsubscriber for each handler\n    const unsubs = unsubscribers.map((unsubscriber) => unsubscriber(...args));\n\n    // If all the unsubscribers resolve to truthiness, we succeed\n    return unsubs.every((success) => success);\n  };\n};\n\n/**\n * Function to run to dispose of something that runs asynchronously. The promise resolves to true if\n * successfully unsubscribed\n */\nexport type UnsubscriberAsync = () => Promise<boolean>;\n\n/**\n * Returns an UnsubscriberAsync function that combines all the unsubscribers passed in.\n *\n * @param unsubscribers - All unsubscribers to aggregate into one unsubscriber.\n * @returns Function that unsubscribes from all passed in unsubscribers when run\n */\nexport const aggregateUnsubscriberAsyncs = (\n  unsubscribers: (UnsubscriberAsync | Unsubscriber)[],\n): UnsubscriberAsync => {\n  return async (...args) => {\n    // Run the unsubscriber for each handler\n    const unsubPromises = unsubscribers.map(async (unsubscriber) => unsubscriber(...args));\n\n    // If all the unsubscribers resolve to truthiness, we succeed\n    return (await Promise.all(unsubPromises)).every((success) => success);\n  };\n};\n","/** Collection of functions, objects, and types that are used as helpers in other services. */\n\nexport type moduleSummaryComments = {};\n\n// Thanks to blubberdiblub at https://stackoverflow.com/a/68141099/217579\nexport function newGuid(): string {\n  return '00-0-4-1-000'.replace(/[^-]/g, (s) =>\n    // @ts-expect-error ts(2363) this works fine\n    // eslint-disable-next-line no-bitwise\n    (((Math.random() + ~~s) * 0x10000) >> s).toString(16).padStart(4, '0'),\n  );\n}\n\n// thanks to DRAX at https://stackoverflow.com/a/9436948\n/**\n * Determine whether the object is a string\n *\n * @param o Object to determine if it is a string\n * @returns True if the object is a string; false otherwise\n */\nexport function isString(o: unknown): o is string {\n  return typeof o === 'string' || o instanceof String;\n}\n\n/**\n * Get a function that reduces calls to the function passed in\n *\n * @param fn The function to debounce\n * @param delay How much delay in milliseconds after the most recent call to the debounced function\n *   to call the function\n * @returns Function that, when called, only calls the function passed in at maximum every delay ms\n */\n// We don't know the parameter types since this function can be anything\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function debounce<T extends (...args: any[]) => void>(fn: T, delay = 300): T {\n  if (isString(fn)) throw new Error('Tried to debounce a string! Could be XSS');\n  let timeout: ReturnType<typeof setTimeout>;\n  // Ensure the right return type.\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  return ((...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => fn(...args), delay);\n  }) as T;\n}\n\n/**\n * Groups each item in the array of items into a map according to the keySelector\n *\n * @param items Array of items to group by\n * @param keySelector Function to run on each item to get the key for the group to which it belongs\n * @param valueSelector Function to run on each item to get the value it should have in the group\n *   (like map function). If not provided, uses the item itself\n * @returns Map of keys to groups of values corresponding to each item\n */\nexport function groupBy<T, K>(items: T[], keySelector: (item: T) => K): Map<K, Array<T>>;\nexport function groupBy<T, K, V>(\n  items: T[],\n  keySelector: (item: T) => K,\n  valueSelector: (item: T, key: K) => V,\n): Map<K, Array<V>>;\nexport function groupBy<T, K, V = T>(\n  items: T[],\n  keySelector: (item: T) => K,\n  valueSelector?: (item: T, key: K) => V,\n): Map<K, Array<V | T>> {\n  const map = new Map<K, Array<V | T>>();\n  items.forEach((item) => {\n    const key = keySelector(item);\n    const group = map.get(key);\n    const value = valueSelector ? valueSelector(item, key) : item;\n    if (group) group.push(value);\n    else map.set(key, [value]);\n  });\n  return map;\n}\n\n// From https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\ntype ErrorWithMessage = {\n  message: string;\n};\n\n// From https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\nfunction isErrorWithMessage(error: unknown): error is ErrorWithMessage {\n  return (\n    typeof error === 'object' &&\n    // We're potentially dealing with objects we didn't create, so they might contain `null`\n    // eslint-disable-next-line no-null/no-null\n    error !== null &&\n    'message' in error &&\n    // Type assert `error` to check it's `message`.\n    // eslint-disable-next-line no-type-assertion/no-type-assertion\n    typeof (error as Record<string, unknown>).message === 'string'\n  );\n}\n\n// From https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\n/**\n * Function to get an error from the object (useful for getting an error in a catch block)\n *\n * @param error Error object whose message to get\n * @returns Message of the error - if object has message, returns message. Otherwise tries to\n *   stringify\n */\nfunction toErrorWithMessage(maybeError: unknown): ErrorWithMessage {\n  if (isErrorWithMessage(maybeError)) return maybeError;\n\n  try {\n    return new Error(JSON.stringify(maybeError));\n  } catch {\n    // fallback in case there's an error stringifying the maybeError\n    // like with circular references for example.\n    return new Error(String(maybeError));\n  }\n}\n\n// From https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\n/**\n * Function to get an error message from the object (useful for getting error message in a catch\n * block)\n *\n * @example `try {...} catch (e) { logger.info(getErrorMessage(e)) }`\n *\n * @param error Error object whose message to get\n * @returns Message of the error - if object has message, returns message. Otherwise tries to\n *   stringify\n */\nexport function getErrorMessage(error: unknown) {\n  return toErrorWithMessage(error).message;\n}\n\n/** Asynchronously waits for the specified number of milliseconds. (wraps setTimeout in a promise) */\nexport function wait(ms: number) {\n  // eslint-disable-next-line no-promise-executor-return\n  return new Promise<void>((resolve) => setTimeout(resolve, ms));\n}\n\n/**\n * Runs the specified function and will timeout if it takes longer than the specified wait time\n *\n * @param fn The function to run\n * @param maxWaitTimeInMS The maximum amount of time to wait for the function to resolve\n * @returns Promise that resolves to the resolved value of the function or undefined if it ran\n *   longer than the specified wait time\n */\nexport function waitForDuration<TResult>(fn: () => Promise<TResult>, maxWaitTimeInMS: number) {\n  const timeout = wait(maxWaitTimeInMS).then(() => undefined);\n  return Promise.any([timeout, fn()]);\n}\n\n/**\n * Get all functions on an object and its prototype chain (so we don't miss any class methods or any\n * object methods). Note that the functions on the final item in the prototype chain (i.e., Object)\n * are skipped to avoid including functions like `__defineGetter__`, `__defineSetter__`, `toString`,\n * etc.\n *\n * @param obj Object whose functions to get\n * @param objId Optional ID of the object to use for debug logging\n * @returns Array of all function names on an object\n */\n// Note: lodash has something that MIGHT do the same thing as this. Investigate for https://github.com/paranext/paranext-core/issues/134\nexport function getAllObjectFunctionNames(\n  obj: { [property: string]: unknown },\n  objId: string = 'obj',\n): Set<string> {\n  const objectFunctionNames = new Set<string>();\n\n  // Get all function properties directly defined on the object\n  Object.getOwnPropertyNames(obj).forEach((property) => {\n    try {\n      if (typeof obj[property] === 'function') objectFunctionNames.add(property);\n    } catch (error) {\n      console.debug(`Skipping ${property} on ${objId} due to error: ${error}`);\n    }\n  });\n\n  // Walk up the prototype chain and get additional function properties, skipping the functions\n  // provided by the final (Object) prototype\n  let objectPrototype = Object.getPrototypeOf(obj);\n  while (objectPrototype && Object.getPrototypeOf(objectPrototype)) {\n    Object.getOwnPropertyNames(objectPrototype).forEach((property) => {\n      try {\n        if (typeof obj[property] === 'function') objectFunctionNames.add(property);\n      } catch (error) {\n        console.debug(`Skipping ${property} on ${objId}'s prototype due to error: ${error}`);\n      }\n    });\n    objectPrototype = Object.getPrototypeOf(objectPrototype);\n  }\n\n  return objectFunctionNames;\n}\n","var getOwnPropertyNames = Object.getOwnPropertyNames, getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Combine two comparators into a single comparators.\n */\nfunction combineComparators(comparatorA, comparatorB) {\n    return function isEqual(a, b, state) {\n        return comparatorA(a, b, state) && comparatorB(a, b, state);\n    };\n}\n/**\n * Wrap the provided `areItemsEqual` method to manage the circular state, allowing\n * for circular references to be safely included in the comparison without creating\n * stack overflows.\n */\nfunction createIsCircular(areItemsEqual) {\n    return function isCircular(a, b, state) {\n        if (!a || !b || typeof a !== 'object' || typeof b !== 'object') {\n            return areItemsEqual(a, b, state);\n        }\n        var cache = state.cache;\n        var cachedA = cache.get(a);\n        var cachedB = cache.get(b);\n        if (cachedA && cachedB) {\n            return cachedA === b && cachedB === a;\n        }\n        cache.set(a, b);\n        cache.set(b, a);\n        var result = areItemsEqual(a, b, state);\n        cache.delete(a);\n        cache.delete(b);\n        return result;\n    };\n}\n/**\n * Get the properties to strictly examine, which include both own properties that are\n * not enumerable and symbol properties.\n */\nfunction getStrictProperties(object) {\n    return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));\n}\n/**\n * Whether the object contains the property passed as an own property.\n */\nvar hasOwn = Object.hasOwn ||\n    (function (object, property) {\n        return hasOwnProperty.call(object, property);\n    });\n/**\n * Whether the values passed are strictly equal or both NaN.\n */\nfunction sameValueZeroEqual(a, b) {\n    return a || b ? a === b : a === b || (a !== a && b !== b);\n}\n\nvar OWNER = '_owner';\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor, keys = Object.keys;\n/**\n * Whether the arrays are equal in value.\n */\nfunction areArraysEqual(a, b, state) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (!state.equals(a[index], b[index], index, index, a, b, state)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the dates passed are equal in value.\n */\nfunction areDatesEqual(a, b) {\n    return sameValueZeroEqual(a.getTime(), b.getTime());\n}\n/**\n * Whether the `Map`s are equal in value.\n */\nfunction areMapsEqual(a, b, state) {\n    if (a.size !== b.size) {\n        return false;\n    }\n    var matchedIndices = {};\n    var aIterable = a.entries();\n    var index = 0;\n    var aResult;\n    var bResult;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.entries();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            var _a = aResult.value, aKey = _a[0], aValue = _a[1];\n            var _b = bResult.value, bKey = _b[0], bValue = _b[1];\n            if (!hasMatch &&\n                !matchedIndices[matchIndex] &&\n                (hasMatch =\n                    state.equals(aKey, bKey, index, matchIndex, a, b, state) &&\n                        state.equals(aValue, bValue, aKey, bKey, a, b, state))) {\n                matchedIndices[matchIndex] = true;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n        index++;\n    }\n    return true;\n}\n/**\n * Whether the objects are equal in value.\n */\nfunction areObjectsEqual(a, b, state) {\n    var properties = keys(a);\n    var index = properties.length;\n    if (keys(b).length !== index) {\n        return false;\n    }\n    var property;\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        property = properties[index];\n        if (property === OWNER &&\n            (a.$$typeof || b.$$typeof) &&\n            a.$$typeof !== b.$$typeof) {\n            return false;\n        }\n        if (!hasOwn(b, property) ||\n            !state.equals(a[property], b[property], property, property, a, b, state)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the objects are equal in value with strict property checking.\n */\nfunction areObjectsEqualStrict(a, b, state) {\n    var properties = getStrictProperties(a);\n    var index = properties.length;\n    if (getStrictProperties(b).length !== index) {\n        return false;\n    }\n    var property;\n    var descriptorA;\n    var descriptorB;\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        property = properties[index];\n        if (property === OWNER &&\n            (a.$$typeof || b.$$typeof) &&\n            a.$$typeof !== b.$$typeof) {\n            return false;\n        }\n        if (!hasOwn(b, property)) {\n            return false;\n        }\n        if (!state.equals(a[property], b[property], property, property, a, b, state)) {\n            return false;\n        }\n        descriptorA = getOwnPropertyDescriptor(a, property);\n        descriptorB = getOwnPropertyDescriptor(b, property);\n        if ((descriptorA || descriptorB) &&\n            (!descriptorA ||\n                !descriptorB ||\n                descriptorA.configurable !== descriptorB.configurable ||\n                descriptorA.enumerable !== descriptorB.enumerable ||\n                descriptorA.writable !== descriptorB.writable)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the primitive wrappers passed are equal in value.\n */\nfunction arePrimitiveWrappersEqual(a, b) {\n    return sameValueZeroEqual(a.valueOf(), b.valueOf());\n}\n/**\n * Whether the regexps passed are equal in value.\n */\nfunction areRegExpsEqual(a, b) {\n    return a.source === b.source && a.flags === b.flags;\n}\n/**\n * Whether the `Set`s are equal in value.\n */\nfunction areSetsEqual(a, b, state) {\n    if (a.size !== b.size) {\n        return false;\n    }\n    var matchedIndices = {};\n    var aIterable = a.values();\n    var aResult;\n    var bResult;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.values();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            if (!hasMatch &&\n                !matchedIndices[matchIndex] &&\n                (hasMatch = state.equals(aResult.value, bResult.value, aResult.value, bResult.value, a, b, state))) {\n                matchedIndices[matchIndex] = true;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the TypedArray instances are equal in value.\n */\nfunction areTypedArraysEqual(a, b) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (a[index] !== b[index]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nvar ARGUMENTS_TAG = '[object Arguments]';\nvar BOOLEAN_TAG = '[object Boolean]';\nvar DATE_TAG = '[object Date]';\nvar MAP_TAG = '[object Map]';\nvar NUMBER_TAG = '[object Number]';\nvar OBJECT_TAG = '[object Object]';\nvar REG_EXP_TAG = '[object RegExp]';\nvar SET_TAG = '[object Set]';\nvar STRING_TAG = '[object String]';\nvar isArray = Array.isArray;\nvar isTypedArray = typeof ArrayBuffer === 'function' && ArrayBuffer.isView\n    ? ArrayBuffer.isView\n    : null;\nvar assign = Object.assign;\nvar getTag = Object.prototype.toString.call.bind(Object.prototype.toString);\n/**\n * Create a comparator method based on the type-specific equality comparators passed.\n */\nfunction createEqualityComparator(_a) {\n    var areArraysEqual = _a.areArraysEqual, areDatesEqual = _a.areDatesEqual, areMapsEqual = _a.areMapsEqual, areObjectsEqual = _a.areObjectsEqual, arePrimitiveWrappersEqual = _a.arePrimitiveWrappersEqual, areRegExpsEqual = _a.areRegExpsEqual, areSetsEqual = _a.areSetsEqual, areTypedArraysEqual = _a.areTypedArraysEqual;\n    /**\n     * compare the value of the two objects and return true if they are equivalent in values\n     */\n    return function comparator(a, b, state) {\n        // If the items are strictly equal, no need to do a value comparison.\n        if (a === b) {\n            return true;\n        }\n        // If the items are not non-nullish objects, then the only possibility\n        // of them being equal but not strictly is if they are both `NaN`. Since\n        // `NaN` is uniquely not equal to itself, we can use self-comparison of\n        // both objects, which is faster than `isNaN()`.\n        if (a == null ||\n            b == null ||\n            typeof a !== 'object' ||\n            typeof b !== 'object') {\n            return a !== a && b !== b;\n        }\n        var constructor = a.constructor;\n        // Checks are listed in order of commonality of use-case:\n        //   1. Common complex object types (plain object, array)\n        //   2. Common data values (date, regexp)\n        //   3. Less-common complex object types (map, set)\n        //   4. Less-common data values (promise, primitive wrappers)\n        // Inherently this is both subjective and assumptive, however\n        // when reviewing comparable libraries in the wild this order\n        // appears to be generally consistent.\n        // Constructors should match, otherwise there is potential for false positives\n        // between class and subclass or custom object and POJO.\n        if (constructor !== b.constructor) {\n            return false;\n        }\n        // `isPlainObject` only checks against the object's own realm. Cross-realm\n        // comparisons are rare, and will be handled in the ultimate fallback, so\n        // we can avoid capturing the string tag.\n        if (constructor === Object) {\n            return areObjectsEqual(a, b, state);\n        }\n        // `isArray()` works on subclasses and is cross-realm, so we can avoid capturing\n        // the string tag or doing an `instanceof` check.\n        if (isArray(a)) {\n            return areArraysEqual(a, b, state);\n        }\n        // `isTypedArray()` works on all possible TypedArray classes, so we can avoid\n        // capturing the string tag or comparing against all possible constructors.\n        if (isTypedArray != null && isTypedArray(a)) {\n            return areTypedArraysEqual(a, b, state);\n        }\n        // Try to fast-path equality checks for other complex object types in the\n        // same realm to avoid capturing the string tag. Strict equality is used\n        // instead of `instanceof` because it is more performant for the common\n        // use-case. If someone is subclassing a native class, it will be handled\n        // with the string tag comparison.\n        if (constructor === Date) {\n            return areDatesEqual(a, b, state);\n        }\n        if (constructor === RegExp) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (constructor === Map) {\n            return areMapsEqual(a, b, state);\n        }\n        if (constructor === Set) {\n            return areSetsEqual(a, b, state);\n        }\n        // Since this is a custom object, capture the string tag to determing its type.\n        // This is reasonably performant in modern environments like v8 and SpiderMonkey.\n        var tag = getTag(a);\n        if (tag === DATE_TAG) {\n            return areDatesEqual(a, b, state);\n        }\n        if (tag === REG_EXP_TAG) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (tag === MAP_TAG) {\n            return areMapsEqual(a, b, state);\n        }\n        if (tag === SET_TAG) {\n            return areSetsEqual(a, b, state);\n        }\n        if (tag === OBJECT_TAG) {\n            // The exception for value comparison is custom `Promise`-like class instances. These should\n            // be treated the same as standard `Promise` objects, which means strict equality, and if\n            // it reaches this point then that strict equality comparison has already failed.\n            return (typeof a.then !== 'function' &&\n                typeof b.then !== 'function' &&\n                areObjectsEqual(a, b, state));\n        }\n        // If an arguments tag, it should be treated as a standard object.\n        if (tag === ARGUMENTS_TAG) {\n            return areObjectsEqual(a, b, state);\n        }\n        // As the penultimate fallback, check if the values passed are primitive wrappers. This\n        // is very rare in modern JS, which is why it is deprioritized compared to all other object\n        // types.\n        if (tag === BOOLEAN_TAG || tag === NUMBER_TAG || tag === STRING_TAG) {\n            return arePrimitiveWrappersEqual(a, b, state);\n        }\n        // If not matching any tags that require a specific type of comparison, then we hard-code false because\n        // the only thing remaining is strict equality, which has already been compared. This is for a few reasons:\n        //   - Certain types that cannot be introspected (e.g., `WeakMap`). For these types, this is the only\n        //     comparison that can be made.\n        //   - For types that can be introspected, but rarely have requirements to be compared\n        //     (`ArrayBuffer`, `DataView`, etc.), the cost is avoided to prioritize the common\n        //     use-cases (may be included in a future release, if requested enough).\n        //   - For types that can be introspected but do not have an objective definition of what\n        //     equality is (`Error`, etc.), the subjective decision is to be conservative and strictly compare.\n        // In all cases, these decisions should be reevaluated based on changes to the language and\n        // common development practices.\n        return false;\n    };\n}\n/**\n * Create the configuration object used for building comparators.\n */\nfunction createEqualityComparatorConfig(_a) {\n    var circular = _a.circular, createCustomConfig = _a.createCustomConfig, strict = _a.strict;\n    var config = {\n        areArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areArraysEqual,\n        areDatesEqual: areDatesEqual,\n        areMapsEqual: strict\n            ? combineComparators(areMapsEqual, areObjectsEqualStrict)\n            : areMapsEqual,\n        areObjectsEqual: strict\n            ? areObjectsEqualStrict\n            : areObjectsEqual,\n        arePrimitiveWrappersEqual: arePrimitiveWrappersEqual,\n        areRegExpsEqual: areRegExpsEqual,\n        areSetsEqual: strict\n            ? combineComparators(areSetsEqual, areObjectsEqualStrict)\n            : areSetsEqual,\n        areTypedArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areTypedArraysEqual,\n    };\n    if (createCustomConfig) {\n        config = assign({}, config, createCustomConfig(config));\n    }\n    if (circular) {\n        var areArraysEqual$1 = createIsCircular(config.areArraysEqual);\n        var areMapsEqual$1 = createIsCircular(config.areMapsEqual);\n        var areObjectsEqual$1 = createIsCircular(config.areObjectsEqual);\n        var areSetsEqual$1 = createIsCircular(config.areSetsEqual);\n        config = assign({}, config, {\n            areArraysEqual: areArraysEqual$1,\n            areMapsEqual: areMapsEqual$1,\n            areObjectsEqual: areObjectsEqual$1,\n            areSetsEqual: areSetsEqual$1,\n        });\n    }\n    return config;\n}\n/**\n * Default equality comparator pass-through, used as the standard `isEqual` creator for\n * use inside the built comparator.\n */\nfunction createInternalEqualityComparator(compare) {\n    return function (a, b, _indexOrKeyA, _indexOrKeyB, _parentA, _parentB, state) {\n        return compare(a, b, state);\n    };\n}\n/**\n * Create the `isEqual` function used by the consuming application.\n */\nfunction createIsEqual(_a) {\n    var circular = _a.circular, comparator = _a.comparator, createState = _a.createState, equals = _a.equals, strict = _a.strict;\n    if (createState) {\n        return function isEqual(a, b) {\n            var _a = createState(), _b = _a.cache, cache = _b === void 0 ? circular ? new WeakMap() : undefined : _b, meta = _a.meta;\n            return comparator(a, b, {\n                cache: cache,\n                equals: equals,\n                meta: meta,\n                strict: strict,\n            });\n        };\n    }\n    if (circular) {\n        return function isEqual(a, b) {\n            return comparator(a, b, {\n                cache: new WeakMap(),\n                equals: equals,\n                meta: undefined,\n                strict: strict,\n            });\n        };\n    }\n    var state = {\n        cache: undefined,\n        equals: equals,\n        meta: undefined,\n        strict: strict,\n    };\n    return function isEqual(a, b) {\n        return comparator(a, b, state);\n    };\n}\n\n/**\n * Whether the items passed are deeply-equal in value.\n */\nvar deepEqual = createCustomEqual();\n/**\n * Whether the items passed are deeply-equal in value based on strict comparison.\n */\nvar strictDeepEqual = createCustomEqual({ strict: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references.\n */\nvar circularDeepEqual = createCustomEqual({ circular: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularDeepEqual = createCustomEqual({\n    circular: true,\n    strict: true,\n});\n/**\n * Whether the items passed are shallowly-equal in value.\n */\nvar shallowEqual = createCustomEqual({\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value based on strict comparison\n */\nvar strictShallowEqual = createCustomEqual({\n    strict: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references.\n */\nvar circularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n    strict: true,\n});\n/**\n * Create a custom equality comparison method.\n *\n * This can be done to create very targeted comparisons in extreme hot-path scenarios\n * where the standard methods are not performant enough, but can also be used to provide\n * support for legacy environments that do not support expected features like\n * `RegExp.prototype.flags` out of the box.\n */\nfunction createCustomEqual(options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.circular, circular = _a === void 0 ? false : _a, createCustomInternalComparator = options.createInternalComparator, createState = options.createState, _b = options.strict, strict = _b === void 0 ? false : _b;\n    var config = createEqualityComparatorConfig(options);\n    var comparator = createEqualityComparator(config);\n    var equals = createCustomInternalComparator\n        ? createCustomInternalComparator(comparator)\n        : createInternalEqualityComparator(comparator);\n    return createIsEqual({ circular: circular, comparator: comparator, createState: createState, equals: equals, strict: strict });\n}\n\nexport { circularDeepEqual, circularShallowEqual, createCustomEqual, deepEqual, sameValueZeroEqual, shallowEqual, strictCircularDeepEqual, strictCircularShallowEqual, strictDeepEqual, strictShallowEqual };\n//# sourceMappingURL=index.mjs.map\n","// There is a circular version https://www.npmjs.com/package/fast-equals#circulardeepequal that I\n// think allows comparing React refs (which have circular references in particular places that this\n// library would ignore). Maybe we can change to that version sometime if needed.\nimport { deepEqual as isEqualDeep } from 'fast-equals';\n\n/**\n * Check that two objects are deeply equal, comparing members of each object and such\n *\n * @param a The first object to compare\n * @param b The second object to compare\n *\n *   WARNING: Objects like arrays from different iframes have different constructor function\n *   references even if they do the same thing, so this deep equality comparison fails objects that\n *   look the same but have different constructors because different constructors could produce\n *   false positives in [a few specific\n *   situations](https://github.com/planttheidea/fast-equals/blob/a41afc0a240ad5a472e47b53791e9be017f52281/src/comparator.ts#L96).\n *   This means that two objects like arrays from different iframes that look the same will fail\n *   this check. Please use some other means to check deep equality in those situations.\n *\n *   Note: This deep equality check considers `undefined` values on keys of objects NOT to be equal to\n *   not specifying the key at all. For example, `{ stuff: 3, things: undefined }` and `{ stuff: 3\n *   }` are not considered equal in this case\n *\n *   - For more information and examples, see [this\n *       CodeSandbox](https://codesandbox.io/s/deepequallibrarycomparison-4g4kk4?file=/src/index.mjs).\n *\n * @returns True if a and b are deeply equal; false otherwise\n */\nexport default function deepEqual(a: unknown, b: unknown) {\n  return isEqualDeep(a, b);\n}\n","/**\n * Converts a JavaScript value to a JSON string, changing `undefined` properties in the JavaScript\n * object to `null` properties in the JSON string.\n *\n * WARNING: `null` values will become `undefined` values after passing through {@link serialize} then\n * {@link deserialize}. For example, `{ a: 1, b: undefined, c: null }` will become `{ a: 1, b:\n * undefined, c: undefined }`. If you are passing around user data that needs to retain `null`\n * values, you should wrap them yourself in a string before using this function. Alternatively, you\n * can write your own replacer that will preserve `null` in a way that you can recover later.\n *\n * @param value A JavaScript value, usually an object or array, to be converted.\n * @param replacer A function that transforms the results. Note that all `undefined` values returned\n *   by the replacer will be further transformed into `null` in the JSON string.\n * @param space Adds indentation, white space, and line break characters to the return-value JSON\n *   text to make it easier to read. See the `space` parameter of `JSON.stringify` for more\n *   details.\n */\nexport function serialize(\n  value: unknown,\n  replacer?: (this: unknown, key: string, value: unknown) => unknown,\n  space?: string | number,\n): string {\n  const undefinedReplacer = (replacerKey: string, replacerValue: unknown) => {\n    let newValue = replacerValue;\n    if (replacer) newValue = replacer(replacerKey, newValue);\n    // All `undefined` values become `null` on the way from JS objects into JSON strings\n    // eslint-disable-next-line no-null/no-null\n    if (newValue === undefined) newValue = null;\n    return newValue;\n  };\n  return JSON.stringify(value, undefinedReplacer, space);\n}\n\n/**\n * Converts a JSON string into a value, converting all `null` properties from JSON into `undefined`\n * in the returned JavaScript value/object.\n *\n * WARNING: `null` values will become `undefined` values after passing through {@link serialize} then\n * {@link deserialize}. For example, `{ a: 1, b: undefined, c: null }` will become `{ a: 1, b:\n * undefined, c: undefined }`. If you are passing around user data that needs to retain `null`\n * values, you should wrap them yourself in a string before using this function. Alternatively, you\n * can write your own replacer that will preserve `null` in a way that you can recover later.\n *\n * @param text A valid JSON string.\n * @param reviver A function that transforms the results. This function is called for each member of\n *   the object. If a member contains nested objects, the nested objects are transformed before the\n *   parent object is. Note that `null` values are converted into `undefined` values after the\n *   reviver has run.\n */\nexport function deserialize(\n  value: string,\n  reviver?: (this: unknown, key: string, value: unknown) => unknown,\n  // Need to use `any` instead of `unknown` here to match the signature of JSON.parse\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n): any {\n  // Helper function to replace `null` with `undefined` on a per property basis. This can't be done\n  // with our own reviver because `JSON.parse` removes `undefined` properties from the return value.\n  function replaceNull(obj: Record<string | number, unknown>): Record<string | number, unknown> {\n    Object.keys(obj).forEach((key: string | number) => {\n      // We only want to replace `null`, not other falsy values\n      // eslint-disable-next-line no-null/no-null\n      if (obj[key] === null) obj[key] = undefined;\n      // If the property is an object, recursively call the helper function on it\n      else if (typeof obj[key] === 'object')\n        // Since the object came from a string, we know the keys will not be symbols\n        // eslint-disable-next-line no-type-assertion/no-type-assertion\n        obj[key] = replaceNull(obj[key] as Record<string | number, unknown>);\n    });\n    return obj;\n  }\n\n  const parsedObject = JSON.parse(value, reviver);\n  // Explicitly convert the value 'null' that isn't stored as a property on an object to 'undefined'\n  // eslint-disable-next-line no-null/no-null\n  if (parsedObject === null) return undefined;\n  if (typeof parsedObject === 'object') return replaceNull(parsedObject);\n  return parsedObject;\n}\n\n/**\n * Check to see if the value is serializable without losing information\n *\n * @param value Value to test\n * @returns True if serializable; false otherwise\n *\n *   Note: the values `undefined` and `null` are serializable (on their own or in an array), but\n *   `null` values get transformed into `undefined` when serializing/deserializing.\n *\n *   WARNING: This is inefficient right now as it stringifies, parses, stringifies, and === the value.\n *   Please only use this if you need to\n *\n *   DISCLAIMER: this does not successfully detect that values are not serializable in some cases:\n *\n *   - Losses of removed properties like functions and `Map`s\n *   - Class instances (not deserializable into class instances without special code)\n *\n *   We intend to improve this in the future if it becomes important to do so. See [`JSON.stringify`\n *   documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#description)\n *   for more information.\n */\nexport function isSerializable(value: unknown): boolean {\n  try {\n    const serializedValue = serialize(value);\n    return serializedValue === serialize(deserialize(serializedValue));\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * HTML Encodes the provided string. Thanks to ChatGPT\n *\n * @param str String to HTML encode\n * @returns HTML-encoded string\n */\nexport const htmlEncode = (str: string): string =>\n  str\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;')\n    .replace(/\\//g, '&#x2F;');\n"],"names":["AsyncVariable","variableName","rejectIfNotSettledWithinMS","__publicField","resolve","reject","value","throwIfAlreadySettled","reason","UnsubscriberAsyncList","name","unsubscribers","unsubscriber","unsubs","results","unsubscriberSucceeded","index","PlatformEventEmitter","event","callback","callbackIndex","_a","P","R","t","e","s","i","m","B","X","E","U","g","k","x","T","O","V","I","_","L","S","G","C","A","H","y","q","N","c","f","u","M","n","D","r","o","h","p","d","w","v","b","J","l","scrBookData","bookNameOptions","getBookNameOptions","Canon","bookId","FIRST_SCR_BOOK_NUM","LAST_SCR_BOOK_NUM","FIRST_SCR_CHAPTER_NUM","FIRST_SCR_VERSE_NUM","getChaptersForBook","bookNum","offsetBook","scrRef","offset","offsetChapter","offsetVerse","aggregateUnsubscribers","args","success","aggregateUnsubscriberAsyncs","unsubPromises","newGuid","isString","debounce","fn","delay","timeout","groupBy","items","keySelector","valueSelector","map","item","key","group","isErrorWithMessage","error","toErrorWithMessage","maybeError","getErrorMessage","wait","ms","waitForDuration","maxWaitTimeInMS","getAllObjectFunctionNames","obj","objId","objectFunctionNames","property","objectPrototype","getOwnPropertyNames","getOwnPropertySymbols","hasOwnProperty","combineComparators","comparatorA","comparatorB","a","state","createIsCircular","areItemsEqual","cache","cachedA","cachedB","result","getStrictProperties","object","hasOwn","sameValueZeroEqual","OWNER","getOwnPropertyDescriptor","keys","areArraysEqual","areDatesEqual","areMapsEqual","matchedIndices","aIterable","aResult","bResult","bIterable","hasMatch","matchIndex","aKey","aValue","_b","bKey","bValue","areObjectsEqual","properties","areObjectsEqualStrict","descriptorA","descriptorB","arePrimitiveWrappersEqual","areRegExpsEqual","areSetsEqual","areTypedArraysEqual","ARGUMENTS_TAG","BOOLEAN_TAG","DATE_TAG","MAP_TAG","NUMBER_TAG","OBJECT_TAG","REG_EXP_TAG","SET_TAG","STRING_TAG","isArray","isTypedArray","assign","getTag","createEqualityComparator","constructor","tag","createEqualityComparatorConfig","circular","createCustomConfig","strict","config","areArraysEqual$1","areMapsEqual$1","areObjectsEqual$1","areSetsEqual$1","createInternalEqualityComparator","compare","_indexOrKeyA","_indexOrKeyB","_parentA","_parentB","createIsEqual","comparator","createState","equals","meta","deepEqual","createCustomEqual","options","createCustomInternalComparator","isEqualDeep","serialize","replacer","space","replacerKey","replacerValue","newValue","deserialize","reviver","replaceNull","parsedObject","isSerializable","serializedValue","htmlEncode","str"],"mappings":"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CA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AACF,GAAGC,IAAI;AAAA,EACL;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAGC,IAAI;AAAA,EACL;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA;AAAA,EAGA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAGC,IAAIC;AACP,SAASC,EAAET,GAAGC,IAAI,IAAI;AACpB,SAAOA,MAAMD,IAAIA,EAAE,YAAa,IAAGA,KAAKO,IAAI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","x_google_ignoreList":[3,7]}